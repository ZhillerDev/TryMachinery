### 简介

> 笔记记录自油管课程：https://www.youtube.com/watch?v=9J4YWvHMWf4&list=PLw0SimokefZ3uWQoRsyf-gKNSs4Td-0k6&index=4

<br>

### GPIO

`GPIO 2` 口位于 esp32 上，是一个蓝色的 LED，我们可以通过 machine 库简单的对其进行点亮与熄灭的操作

```py
import machine
import time

# 获取GPIO口
led = machine.Pin(2,machine.Pin.OUT)

# 将灯光闪烁封装为一个函数
def blink_gpio_times(nums):
    count = 0
    while(count<nums):
        led.on() # 点亮
        time.sleep(0.5) # 延迟0.5s
        led.off() # 熄灭
        time.sleep(0.5)
        count+=1
    print("light blink complete")
```

<br>

`GPIO 0` 口用于检测 boot 按钮是否按下

该口在上电后默认具有高电平，即 3.3v  
当按住 boot 按钮后，变为低电平，即 0v

```py
import machine

sw = machine.Pin(0,machine.Pin.IN)

# 未按住boot时
print(sw.value()) # 1

# 按住boot时
print(sw.value()) # 0
```

> 小技巧：可以通过检测 GPIO 0 口状态，动态控制 GPIO 2 口，实现点击按钮开关灯

<br>

### 外部中断

```py
import machine
import time

led = machine.Pin(2,machine.Pin.OUT)
sw = machine.Pin(0,machine.Pin.IN)

def handle_interrupt():
    led.value(not led.value())

sw.irq(trigger=machine.Pin.IRQ_FALLING,handler=handle_interrupt)
```
